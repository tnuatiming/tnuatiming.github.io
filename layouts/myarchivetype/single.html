<!DOCTYPE html>
<html class="no-js" lang="he" xml:lang="he" dir="rtl">
{{ partial "head.html" . }}

    <body id="archive">

 {{ partial "header.html" . }}

<div id="main">
  <div id="content">
    <div>
      <article role="article">
        <header>
          <h1 class="entry-title">
            {{ .Title }}  <!-- title, in this case it will be "Archive page" -->
          </h1>
        </header>
        <div id="blog-archives" class="category">
          {{ .Content }} <!-- content of the markdown file. note that inside the range .Content will point to each page's content -->
          {{ range (where .Site.Pages "Type" "post") }}
          <h2>
            {{ .Date | dateFormat "2006"}} <!-- print publish year -->
          </h2>
          <article>
            <h1>
              <a href="{{ .Permalink }}" title="{{ .Title }}">{{ .Title }}</a>
            </h1>
            <time>
              <span class="month">{{ .Date | dateFormat "Jan" }}</span> <!-- print publish month -->
              <span class="day">{{ .Date | dateFormat "2" }}</span> <!-- print publish day -->
            </time>
              <!-- if you want pages summary you can print it here {{ .Summary }} -->
          </article>
          {{ end }}
        </div>
      </article>
    </div>
  </div>
</div>         



<ul>
    <ul>
        {{ range $key, $taxonomy := .Site.Taxonomies.season }}
        <li> {{ $key }} </li>
        <ul>
            {{ range $taxonomy.Pages }}
            <li hugo-nav="{{ .RelPermalink}}"><a href="{{ .Permalink}}"> {{ .LinkTitle }} </a> </li>
            {{ end }}
        </ul>
        {{ end }}
    </ul>
</ul>



<ul id="all-tags">
  {{ range $name, $taxonomy := .Site.Taxonomies.tag }}
    <li><a href="{{ "/tags/" | relLangURL }}{{ $name | urlize }}">{{ $name }}</a></li>
  {{ end }}
</ul>





<section>
  <ul>
    {{ range $taxonomyname, $taxonomy := .Site.Taxonomies }}
      <li><a href="{{ "/" | relLangURL}}{{ $taxonomyname | urlize }}">{{ $taxonomyname }}</a>
        <ul>
          {{ range $key, $value := $taxonomy }}
          <li> {{ $key }} </li>
                <ul>
                {{ range $value.Pages }}
                <li><a href="{{ .Permalink }}">{{ with .Params.round }}{{ . }} - {{ end }}{{ .Params.place }}</a></li>
                
<!--                    <li hugo-nav="{{ .RelPermalink}}"><a href="{{ .Permalink}}"> {{ .LinkTitle }} </a> </li>-->
                {{ end }}
                </ul>
          {{ end }}
        </ul>
      </li>
    {{ end }}
  </ul>
</section>

<!--   .Site.GetPage "taxonomyTerm" "tag"-->





{{ range first 4 (where .Site.Pages "Params.tag" "!=" nil) }}
    <li><a href="{{ .Permalink }}">{{ .Params.tag }}: {{ with .Params.round }}{{ . }}{{ end }} עונת {{ .Params.season }} - {{ .Params.place }}</a></li>
{{ end }}







<ul id="all-tags">
  {{ range $name, $taxonomy := .Site.Taxonomies.tag }}
     <h3>{{ $name }}</h3>
           {{ range .Pages }}

                {{ if  (eq .Params.tag $name)  }}

                        <li><a href="{{ .Permalink }}">{{ with .Params.round }}{{ . }} - {{ end }}{{ .Params.place }}</a></li>
  {{ end }}
  {{ end }}
  {{ end }}
</ul>






<!-- Groups content according to content section. The ".Key" in this instance will be the section's title. -->

{{ range ($.Site.RegularPages.GroupByParam "season").Reverse }} <!--  grope by season -->

    {{ $season := .Key }}
    
    <div class="season">
    <h1 class="season_header">עונת {{ $season }}</h1>
    
    {{ range $tag, $taxonomy := $.Site.Taxonomies.tag }} <!-- itreate by tag  -->
    <!--      {{ len (where $taxonomy.Pages "Params.season" $season) }}-->

        {{ if (len (where $taxonomy.Pages "Params.season" $season)) "!=" 0 }} <!-- check that tag of season has posts in it  -->
            <div class="sport"><h2>{{ $tag }}</h2>
            <ul>
        {{ end }}
        
        {{ range .Pages }}

            {{ if (eq .Params.season $season) }} <!-- if the post in the posts by tag list, is the same season, so show it  -->
                <li><a href="{{ .Permalink }}">{{ with .Params.round }}{{ . }} - {{ end }}{{ .Params.place }}</a></li>
            {{ end }}
        
        {{ end }}

        {{ if (len (where $taxonomy.Pages "Params.season" $season)) "!=" 0 }} <!-- check that tag of season has posts in it  -->
            </ul>
            </div>
        {{ end }}   
    
    {{ end }}
    </div>
    
{{ end }}




{{ partial "footer.html" . }}
 
    </body>
</html>
