<!DOCTYPE html>
<html class="no-js" lang="en" xml:lang="en" dir="ltr">
    <head>
        <title>start clock</title>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>

            @import url(//fonts.googleapis.com/earlyaccess/notosanshebrew.css);

            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }
            body {
                background-color: white;
                cursor: none;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                width: 100%;
                height: 100%;
                min-height: 100%;
                font-family: 'Noto Sans Hebrew', "Noto Sans", 'Open Sans Hebrew', Arial, sans-serif;
            }
        
            #mutebottonhide {
                order: 1;
                flex: 0 1 auto;
                width: 100%;
                text-align: right;
            }
            #showStopwatch {
                cursor: none;
                color: black;
                order: 2;
                flex: 0 1 auto;
                font-size: 5vh;
                font-weight: 700;
                text-align: left;
                width: 100%;
                padding-left: 2%;
            }
            
            #countdown {
                cursor: none;
                color: black;
                order: 3;
                flex: 1 1 auto;
                margin: 4%;
                width: 90%;
                font-size: 55vh;
                font-weight: 700;
                text-align: center;
                height: 90%;
            }
            .animate {
                animation:changeSize 1s 1;
            }
            @keyframes changeSize {
                0% {transform: scale(0);}
                100% {transform: scale(1);}
            }

            input[type='checkbox'].check-custom {
            position: absolute;
            left: -10000px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
            }
            input[type='checkbox'].check-custom ~ .check-toggle {
            width: 2rem;
            height: 2rem;
            position: relative;
            display: inline-block;
            vertical-align: middle;
            cursor: pointer;
            background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgp4bWxuczpjYz0iaHR0cDovL3dlYi5yZXNvdXJjZS5vcmcvY2MvIgp4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCnhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCnhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKdmVyc2lvbj0iMS4wIgppZD0ibGF5ZXIxIgp3aWR0aD0iNDAwcHQiIGhlaWdodD0iNDAwcHQiCnZpZXdCb3g9IjAgMCA3NSA3NSI+PG1ldGFkYXRhCmlkPSJtZXRhZGF0YTEiPjxyZGY6UkRGPjxjYzpXb3JrCnJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZQpyZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPjwvY2M6V29yaz48L3JkZjpSREY+PC9tZXRhZGF0YT48ZwppZD0iZzEiPjxwb2x5Z29uCmlkPSJwb2x5Z29uMSIKcG9pbnRzPSIzOS4zODksMTMuNzY5IDIyLjIzNSwyOC42MDYgNiwyOC42MDYgNiw0Ny42OTkgMjEuOTg5LDQ3LjY5OSAzOS4zODksNjIuNzUgMzkuMzg5LDEzLjc2OSIKc3R5bGU9InN0cm9rZTojMTExMTExO3N0cm9rZS13aWR0aDo1O3N0cm9rZS1saW5lam9pbjpyb3VuZDtmaWxsOiMxMTExMTE7IgovPgo8L2c+Cjwvc3ZnPgo=) center no-repeat;
            background-size: 100%;
            }
            input[type='checkbox'].check-custom:checked ~ .check-toggle {
            background:  url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgp4bWxuczpjYz0iaHR0cDovL3dlYi5yZXNvdXJjZS5vcmcvY2MvIgp4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCnhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCnhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKdmVyc2lvbj0iMS4wIgppZD0ibGF5ZXIxIgp3aWR0aD0iNDAwcHQiIGhlaWdodD0iNDAwcHQiCnZpZXdCb3g9IjAgMCA3NSA3NSI+PG1ldGFkYXRhCmlkPSJtZXRhZGF0YTEiPjxyZGY6UkRGPjxjYzpXb3JrCnJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZQpyZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPjwvY2M6V29yaz48L3JkZjpSREY+PC9tZXRhZGF0YT48ZwppZD0iZzEiPjxwb2x5Z29uCmlkPSJwb2x5Z29uMSIKcG9pbnRzPSIzOS4zODksMTMuNzY5IDIyLjIzNSwyOC42MDYgNiwyOC42MDYgNiw0Ny42OTkgMjEuOTg5LDQ3LjY5OSAzOS4zODksNjIuNzUgMzkuMzg5LDEzLjc2OSIKc3R5bGU9InN0cm9rZTojMTExMTExO3N0cm9rZS13aWR0aDo1O3N0cm9rZS1saW5lam9pbjpyb3VuZDtmaWxsOiMxMTExMTE7IgovPjxwYXRoIGlkPSJwYXRoMSIKZD0iTSA0OC4xMjgsNDkuMDMgQyA1MC4wNTcsNDUuOTM0IDUxLjE5LDQyLjI5MSA1MS4xOSwzOC4zNzcgQyA1MS4xOSwzNC4zOTkgNTAuMDI2LDMwLjcwMyA0OC4wNDMsMjcuNTc3IgpzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMTExMTExO3N0cm9rZS13aWR0aDo1O3N0cm9rZS1saW5lY2FwOnJvdW5kIi8+CjxwYXRoIGlkPSJwYXRoMiIKZD0iTSA1NS4wODIsMjAuNTM3IEMgNTguNzc3LDI1LjUyMyA2MC45NjYsMzEuNjk0IDYwLjk2NiwzOC4zNzcgQyA2MC45NjYsNDQuOTk4IDU4LjgxNSw1MS4xMTUgNTUuMTc4LDU2LjA3NiIKc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzExMTExMTtzdHJva2Utd2lkdGg6NTtzdHJva2UtbGluZWNhcDpyb3VuZCIvPgo8cGF0aCBpZD0icGF0aDEiCmQ9Ik0gNjEuNzEsNjIuNjExIEMgNjYuOTc3LDU1Ljk0NSA3MC4xMjgsNDcuNTMxIDcwLjEyOCwzOC4zNzggQyA3MC4xMjgsMjkuMTYxIDY2LjkzNiwyMC42OTYgNjEuNjA5LDE0LjAxIgpzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMTExMTExO3N0cm9rZS13aWR0aDo1O3N0cm9rZS1saW5lY2FwOnJvdW5kIi8+CjwvZz4KPC9zdmc+Cg==) center no-repeat;
            background-size: 100%;
            }

            div#mutebotton {
                visibility: hidden;
            }
            div#mutebottonhide:hover  div#mutebotton {
                visibility: visible;
            }
            label {
                color: gray;
                margin-right: 10px;
            }
            
    </style>
    <script>
    
    var mute = 0;
    if (localStorage.getItem('mute')) {
        mute = localStorage.getItem('mute');
    }
    var showClock = 1;
    if (localStorage.getItem('showClock')) {
        showClock = localStorage.getItem('showClock');
    }
    var every30 = 0;
    if (localStorage.getItem('every30')) {
        every30 = localStorage.getItem('every30');
    }
    var delta = "-00:00:00.000";
    if (localStorage.getItem('delta')) {
        delta = localStorage.getItem('delta');
    }
            
            
            
            
            
        document.addEventListener("DOMContentLoaded", function() {
            
            setTimeout(function(){ document.getElementById("settings").style.visibility = "hidden"; }, 3000);
            
            
                document.getElementById("delta").value = delta;

                document.getElementById('delta').addEventListener('change', (event) => {

                        delta = document.getElementById("delta").value;
                        localStorage.setItem('delta', delta);

                });

            
//            document.getElementById("myAudio").muted = true;
//            document.getElementById("myAudio1").muted = true;


            if (every30 == 1) {
                document.getElementById("every30").checked = true;
            } else {
                document.getElementById("every30").checked = false;
            }
                
            document.getElementById('every30').addEventListener('change', (event) => {
                if (event.target.checked) {
                    every30 = 1;
                } else {
                    every30 = 0;
                }
                localStorage.setItem('every30', every30);
            });
            
            if (showClock == 1) {
                document.getElementById("showClock").checked = true;
                document.getElementById("countdown").style.fontSize = "25vh";
                document.body.style.backgroundColor = "black";
                document.getElementById("countdown").style.color="white";
                document.getElementById("showStopwatch").innerHTML = '';
            } else {
                document.getElementById("showClock").checked = false;
                document.getElementById("countdown").style.fontSize = "55vh";
            }
                
            document.getElementById('showClock').addEventListener('change', (event) => {
                if (event.target.checked) {
                    showClock = 1;
                    document.getElementById("countdown").style.fontSize = "25vh";
                    document.body.style.backgroundColor = "black";
                    document.getElementById("countdown").style.color="white";
                    document.getElementById("showStopwatch").innerHTML = '';
                } else {
                    showClock = 0;
                    document.getElementById("countdown").style.fontSize = "55vh";
                }
                localStorage.setItem('showClock', showClock);
            });
            
            if (mute == 1) {
                document.getElementById("mute").checked = true;
            } else {
                document.getElementById("mute").checked = false;
            }

            document.getElementById('mute').addEventListener('change', (event) => {
                if (event.target.checked) {
                    mute = 1;
                    document.getElementById("myAudio").muted = false;
                    document.getElementById("myAudio1").muted = false;
                } else {
                    mute = 0;
                    document.getElementById("myAudio").muted = true;
                    document.getElementById("myAudio1").muted = true;
                }
                localStorage.setItem('mute', mute);
            });
            
            
            
            
        });  

        // Update the count down every 1 second
        var x = setInterval(function() {

            // Get todays date and time
            var now = new Date();
            var nowMili = now.getTime() + timeString2ms(delta);
             now = new Date(nowMili);
            
            var dateString =  ("0" + (now.getUTCHours()+3)).slice(-2) + ':' + ("0" + now.getUTCMinutes()).slice(-2) + ':' + ("0" + now.getUTCSeconds()).slice(-2);
                
            
            if (showClock == 0) {
                            
                document.getElementById("showStopwatch").innerHTML = dateString;
                
                if ((now.getUTCSeconds() == 0) || (now.getUTCSeconds() == 30 && every30 == 1)) {
                    document.getElementById("countdown").classList.add("animate");
                    setTimeout(function(){
                        document.getElementById("countdown").classList.remove('animate')
                    },900)
                    document.getElementById("myAudio1").play();
                }                
                                
                if ((now.getUTCSeconds() >= 0 && now.getUTCSeconds() < 5) || (now.getUTCSeconds() >= 30 && now.getUTCSeconds() < 35 && every30 == 1)) {
                    document.body.style.backgroundColor = "#6c3";
                    document.getElementById("showStopwatch").style.color="white";
                    document.getElementById("countdown").style.color="white";

                } else if ((now.getUTCSeconds() >= 50 && now.getUTCSeconds() <= 59) || (now.getUTCSeconds() >= 20 && now.getUTCSeconds() <= 29 && every30 == 1)) {
                    document.body.style.backgroundColor = "yellow";
                    document.getElementById("showStopwatch").style.color="black";
                    document.getElementById("countdown").style.color="black";
                    document.getElementById("countdown").classList.add("animate");
                    setTimeout(function(){
                        document.getElementById("countdown").classList.remove('animate')
                    },900)
                } else {
                    document.body.style.backgroundColor = "white";
                    document.getElementById("showStopwatch").style.color="black";
                    document.getElementById("countdown").style.color="black";
                }
                
                if (now.getUTCSeconds() == 50 || (now.getUTCSeconds() == 20 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "10";
                    document.getElementById("myAudio").play();
                } else if (now.getUTCSeconds() == 51 || (now.getUTCSeconds() == 21 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "9";
                } else if (now.getUTCSeconds() == 52 || (now.getUTCSeconds() == 22 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "8";
                } else if (now.getUTCSeconds() == 53 || (now.getUTCSeconds() == 23 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "7";
                } else if (now.getUTCSeconds() == 54 || (now.getUTCSeconds() == 24 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "6";
                } else if (now.getUTCSeconds() == 55 || (now.getUTCSeconds() == 25 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "5";
                    document.getElementById("myAudio").play();
                } else if (now.getUTCSeconds() == 56 || (now.getUTCSeconds() == 26 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "4";
                    document.getElementById("myAudio").play();
                } else if (now.getUTCSeconds() == 57 || (now.getUTCSeconds() == 27 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "3";
                    document.getElementById("myAudio").play();
                } else if (now.getUTCSeconds() == 58 || (now.getUTCSeconds() == 28 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "2";
                    document.getElementById("myAudio").play();
                } else if (now.getUTCSeconds() == 59 || (now.getUTCSeconds() == 29 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "1";
                    document.getElementById("myAudio").play();
                } else if ((now.getUTCSeconds() >= 0 && now.getUTCSeconds() < 5) || (now.getUTCSeconds() >= 30 && now.getUTCSeconds() < 35 && every30 == 1)) {
                    document.getElementById("countdown").innerHTML = "GO!";
                } else {
                    document.getElementById("countdown").innerHTML = "&nbsp;";
                }
            
            } else {
            
                document.getElementById("countdown").innerHTML = dateString;
            }
        
        }, 1000);
                    
    function timeString2ms(a,b){// time(HH:MM:SS.mss) // optimized
            return a=a.split('.'), // optimized
            b=a[1]*1||0, // optimized, if a[1] defined, use it, else use 0
            a=a[0].split(':'),
            b+(a[2]?a[0]*3600+a[1]*60+a[2]*1:a[1]?a[0]*60+a[1]*1:a[0]*1)*1e3 // optimized
               
    };

    
    </script>
    
    </head>
    <body>
    
    <div id="mutebottonhide"> 
        <div id="mutebotton">
            <label id="settings" style="visibility: visible;">settings ----></label>
            <label>
                <input style="transform: scale(2); margin-right: 5px;" name="showClock" id="showClock" type="checkbox">Clock
            </label>
            <label>
                <input style="transform: scale(2); margin-right: 5px;" name="every30" id="every30" type="checkbox">30
            </label>
            <label class="delta">
                <input id="delta" style="width: 150px; font-size: 20px;" type="text" name="delta">
            </label>
            <label>
                <!-- Input element for the checkbox -->
                <input name="mute" id="mute" type="checkbox" class="check-custom">
                <!-- Customization element for the checkbox -->
                <span class="check-toggle"></span>
            </label>
        </div>
    </div>

        <div id="showStopwatch"></div> 

        <div id="countdown"></div> 
    
            <audio id="myAudio" muted>
                <source src="Images/beep-02.mp3" type="audio/mpeg">
            </audio>
            <audio id="myAudio1" muted>
                <source src="Images/beep-09.mp3" type="audio/mpeg">
            </audio>
    
  </body>
</html>
